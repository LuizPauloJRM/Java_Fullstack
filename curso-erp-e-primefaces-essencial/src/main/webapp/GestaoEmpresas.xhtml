<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>

<meta charset="UTF-8"/>
<title>Gestão de Empresas</title>
<!-- Endereço para testar a página no navegador: http://localhost:8080/curso-erp-e-primefaces-essencial/GestaoEmpresas.xhtml -->

<h:outputStylesheet library="minierp" name="estilo.css"/>

</h:head>
<h:body>
		<h:outputText value="jsf funcionando"/> 
	<header>
		<h:graphicImage library="minierp" name="logo.png"/>
	</header>
	<div id="conteudo">
		<h:form>
			<h:panelGrid columns="2">
				<!-- Ao usuário clicar neste label, o foco será direcionado para o input text "razaoSocial". -->
				<h:outputLabel value="Razão Social" for="razaoSocial"/>
				<h:inputText id="razaoSocial" value="#{gestaoEmpresasBean.empresa.razaoSocial}"/>
				
				<h:outputLabel value="Nome Fantasia" for="nomeFantasia"/>
				
				<!-- A correção está aqui: faltava o espaço antes do atributo 'value'. -->
				<h:inputText id="nomeFantasia" value="#{gestaoEmpresasBean.empresa.nomeFantasia}"/>
				
				<h:outputLabel value="Tipo empresa" for="tipo"/>
				<h:selectOneMenu id="tipo" value="#{gestaoEmpresasBean.empresa.tipo}">
					<f:selectItem itemLabel="Selecione"/>
					<!-- Correção: faltava o '}' para fechar a expressão EL e a referência 'TipoEmpresa' estava incorreta. -->
					<f:selectItems value="#{gestaoEmpresasBean.tiposEmpresa}"
						var="tipoEmpresa" itemLabel="#{tipoEmpresa.descricao}" itemValue="#{tipoEmpresa}"/>
				</h:selectOneMenu>
				
				<h:outputLabel />
				<h:commandButton value="Salvar" actionListener="#{gestaoEmpresasBean.salvar}"/>
				<h:commandButton value="Enviar"/>				
			</h:panelGrid>
			<!-- Lista dados para o usuário -->
			<!-- Dados de uma lista no managedBean. Corrigido para exibir dados reais e dinâmicos. -->
			<h:dataTable value="#{gestaoEmpresasBean.empresa}" var="empresa">
				<h:column>
					<f:facet name="header">
						<h:outputText value="Nome Fantasia"/>
					</f:facet>
					
					<h:outputText value="#{empresa.nomeFantasia}"/>			
				</h:column>
				
				<h:column>
					<f:facet name="header">
						<h:outputText value="Tipo Empresa"/>
					</f:facet>
					
					<h:outputText value="#{empresa.tipo.descricao}"/>			
				</h:column>
			</h:dataTable>
		</h:form>
	</div>
	<footer>
		"JSF" e Prime faces essencial - mini erp empresas 
	</footer>

</h:body>
</html>
